{% extends "base.html" %}
{% block title %}Detalle Reservación #{{ reservation.id }}{% endblock %}

{% block content %}
<div class="container py-4">
    <h1 class="h3 mb-4">Reservación #{{ reservation.id }}</h1>
    <div class="card mb-4">
        <div class="card-body">
            <p><strong>Habitación:</strong> {{ reservation.room.number if reservation.room else "N/A" }}</p>
            <p><strong>Entrada:</strong> {{ reservation.check_in_date.strftime('%d/%m/%Y') }}</p>
            <p><strong>Salida:</strong> {{ reservation.check_out_date.strftime('%d/%m/%Y') }}</p>
            <p><strong>Huéspedes:</strong> {{ reservation.guests_count }}</p>
            <p><strong>Total:</strong> ${{ "%.2f"|format(reservation.total_price) }}</p>
            <p><strong>Estado:</strong> 
                <span class="badge {% if reservation.status == 'pending' %}bg-warning
                                 {% elif reservation.status == 'confirmed' %}bg-success
                                 {% elif reservation.status == 'cancelled' %}bg-danger
                                 {% else %}bg-secondary{% endif %}">
                    {{ reservation.status }}
                </span>
            </p>
        </div>
    </div>

    {% if reservation.status in ['pending', 'pendiente'] %}
    <form method="POST" action="{{ url_for('receptionist.update_status', id=reservation.id) }}">
        <div class="d-flex gap-2">
            <button name="status" value="confirmed" class="btn btn-success">Aceptar</button>
            <button name="status" value="cancelled" class="btn btn-danger">Rechazar</button>
            <a href="{{ url_for('receptionist.reservations') }}" class="btn btn-secondary">Volver</a>
        </div>
    </form>
    {% else %}
    <a href="{{ url_for('receptionist.reservations') }}" class="btn btn-secondary">Volver</a>
    {% endif %}
</div>
{% endblock %}
